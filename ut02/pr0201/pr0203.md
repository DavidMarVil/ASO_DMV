## Configuracion de las redes

### Configuracion server-a
Configuramos las ips del server a,para ello iremos al directorio /etc/netplan y aqui modificamos el fichero .yaml, añadimos en cada adaptador la ip con la que se conectaran al server b y al c
````
network:
  version: 2
  ethernets:
    enp0s3:
      dhcp4: true
    enp0s8:
      addresses:
        - 192.168.20.10/24
    enp0s9:
      addresses:
        - 192.168.30.10/24
````

Una vez modificado el fichero para aplicarlo tenemos que usar el comando 
````
david@dmvssh:/etc/netplan$ sudo  netplan apply
````

### Configuracion server-b
Ahora iremos al server-b y haremos lo mismo, modificaremos el fichero .yaml añadiendo una ip ya que solo tenemos un adaptador.
````
network:
  version: 2
  ethernets:
    enp0s3:
      dhcp4: true
    enp0s8:
      addresses:
        - 192.168.20.11/24
````



### Configuracion server-c
Hacemos lo mismo que en el server-b cambiando la ip por la del server-c.
````
network:
  version: 2
  ethernets:
    enp0s3:
      dhcp4: true
    enp0s8:
      addresses:
        - 192.168.30.11/24
````

### Generacion de claves pulico-privadas
Para ello iremos al server-a que sera desde el cual nos conectaremos.
Para generar las claves usamos el comando
````
david@dmvssh:~$ ssh-keygen
Generating public/private ed25519 key pair.
Enter file in which to save the key (/home/david/.ssh/id_ed25519):
````

### Envio de claves
Una vez tengamos las claves se le tendremos que enviar a los servidores b y c la clave publica.
Primero vamos al directorio .ssh que sera donde se nos hayan generado las claves y usaremos el comando scp.
````
david@dmvssh:~/.ssh$ scp ./id_ed25519.pub sysadmin@192.168.20.11:id_ed25519.remote.pub
sysadmin@192.168.20.11's password:
id_ed25519.pub                                       100%   94    23.2KB/s   00:00
````
Y ya estaria enviada al server-b.

Hacemos lo mismo para el server-c.
````
david@dmvssh:~/.ssh$ scp ./id_ed25519.pub sysadmin@192.168.30.11:id_ed25519.remote.pub
The authenticity of host '192.168.30.11 (192.168.30.11)' can't be established.
ED25519 key fingerprint is SHA256:dJlhRXv0g+TLlvpPsXPdaJs1KRsnUkdCCQe5d59ZLFI.
This key is not known by any other names.
Are you sure you want to continue connecting (yes/no/[fingerprint])? yes
Warning: Permanently added '192.168.30.11' (ED25519) to the list of known hosts.
sysadmin@192.168.30.11's password:
id_ed25519.pub                                        100%   94    18.7KB/s   00:00
david@dmvssh:~/.ssh$
````
Me aparece un mensaje distinto ya que tuve que cambiar el hostname del servidor.


### Mover la clave a authorized_keys.

Use el comando mv dentro del directorio .ssh para mover la clave al fichero authorized_keys.
````
sysadmin@server-b:~/.ssh$ mv /home/sysadmin/id_ed25519.remote.pub authorized_key
````
Lo repetimos con el server-c.
````
sysadmin@server-c:~$ cd .ssh
sysadmin@server-c:~/.ssh$ mv /home/sysadmin/id_ed25519.remote.pub authorized_keys
sysadmin@server-c:~/.ssh$
````

Ahora la proxima vez que nos conectemos por ssh no nos pedira la contraseña.
````
david@dmvssh:~/.ssh$ ssh sysadmin@192.168.20.11
Enter passphrase for key '/home/david/.ssh/id_ed25519':
Welcome to Ubuntu 25.04 (GNU/Linux 6.14.0-35-generic x86_64)
````

````
david@dmvssh:~/.ssh$ ssh sysadmin@192.168.30.11
Enter passphrase for key '/home/david/.ssh/id_ed25519':
Welcome to Ubuntu 25.04 (GNU/Linux 6.14.0-35-generic x86_64)
````